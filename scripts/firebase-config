// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBoLRWq0eMadmOlOfCyuSVKCYSNvw3Bpmw",
  authDomain: "pixlbox-bfc2d.firebaseapp.com",
  projectId: "pixlbox-bfc2d",
  storageBucket: "pixlbox-bfc2d.firebasestorage.app",
  messagingSenderId: "443728262091",
  appId: "1:443728262091:web:e03df2f6e2a187bccb7c4e",
  measurementId: "G-XTJCVQ3ZG6"
};


// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// Google Sign In function
function signInWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();
    
    auth.signInWithPopup(provider)
    .then((result) => {
        const user = result.user;
        console.log('Successfully signed in with Google:', user);
        // Redirect to your main app page
        window.location.href = '../profileSelect/index.html';
    })
    .catch((error) => {
        console.error('Google sign-in error:', error);
        alert('Failed to sign in with Google: ' + error.message);
    });
}

// Email/Password Sign Up function
function signUpWithEmail(event) {
    if (event) event.preventDefault(); // Prevent form submission
    
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm-password').value;
    
    // Basic validation
    if (password !== confirmPassword) {
        alert('Passwords do not match!');
        return;
    }
    
    if (password.length < 6) {
        alert('Password should be at least 6 characters');
        return;
    }
    
    auth.createUserWithEmailAndPassword(email, password)
    .then((userCredential) => {
        const user = userCredential.user;
        console.log('Successfully signed up:', user);
        window.location.href = '../profileSelect/index.html';
    })
    .catch((error) => {
        console.error('Sign up error:', error);
        alert('Sign up failed: ' + error.message);
    });
}

// Add event listener for form submission
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', signUpWithEmail);
    }
});